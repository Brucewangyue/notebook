# 数据类型

在MySQL中，选择正确的数据类型，对于性能至关重要。一般应该遵循下面两步：

1. 确定合适的大类型：数字、字符串、时间、二进制
2. 确定具体的类型：有无符号、取值范围、变长定长等

在MySQL数据类型设置方面，尽量用更小的数据类型，因为它们通常有更好的性能，花费更少的硬件资源。并且，尽量把字段定义为NOT NULL，避免使用NULL

## 数值类型

| 类型          | 大小           | 范围(有符号)                                                 | 范围(无符号)       | 用途           |
| ------------- | -------------- | ------------------------------------------------------------ | ------------------ | -------------- |
| TINYINT       | 1 字节         | (-128, 127)                                                  | (0, 255)           | 小整数值       |
| SMALLINT      | 2 字节         | (-32 768, 32 767)                                            | (0, 65 535)        | 大整数值       |
| MEDIUMINT     | 3 字节         | (-8 388 608, 8 388 607)                                      | (0, 16 777 215)    | 大整数值       |
| INT或 INTEGER | 4 字节         | (-2 147 483 648, 2 147 483 647)                              | (0, 4 294 967 295) | 大整数值       |
| BIGINT        | 8 字节         | (-3.402 823 466E+38, 1.175 494 351 E-38)，0，(1.175 494 351E-38，3.402 823 466 351E+38) |                    | 单精度浮点数值 |
| FLOAT         | 4 字节         |                                                              |                    | 双精度浮点数值 |
| DOUBLE        | 8 字节         |                                                              |                    |                |
| DECIMAL       | 对DECIMAL(M,D) | 依赖于M和D的值                                               | 依赖于M和D的值     | 小数值         |

**优化建议**

1. 如果整形数据没有负数，如ID号，建议指定为UNSIGNED无符号类型，容量可以扩大一倍
2. 建议使用TINYINT代替ENUM、BITENUM、SET
3. 避免使用整数的显示宽度(参看文档最后)，也就是说，不要用INT(10)类似的方法指定字段显示宽度，直接用 INT
4. DECIMAL最适合保存准确度要求高，而且用于计算的数据，比如价格。但是在使用DECIMAL类型的时候，注意长度设置
5. 建议使用整形类型来运算和存储实数，方法是，实数乘以相应的倍数后再操作
6. 整数通常是最佳的数据类型，因为它速度快，并且能使用AUTO_INCREMENT

## 日期类型



| 类型     | 大小   | 范围                                       | 格式         | 用途                   |
| -------- | ------ | ------------------------------------------ | ------------ | ---------------------- |
| DATE     | 3 字节 | 1000-01-01 到 9999-12-31                   | YYYY-MM-DD   | 日期值                 |
| TIME     | 3 字节 | '-838:59:59' 到 '838:59:59'                | HH:MM:SS     | 时间值或持续时间       |
| YEAR     | 1 字节 | 1901 到 2155                               | YYYY         | 年份值                 |
| DATETIME | 8 字节 | 1000-01-01 00:00:00 到 9999-12-31 23:59:59 | YYYY-MM-DD   | 混合日期和时间值       |
| TIMESTAM | 4 字节 | 1970-01-01 00:00:00 到 2038-01-19          | YYYYMMDDhhmm | 混合日期和时间值，时间 |

**优化建议**

1. MySQL能存储的最小时间粒度为秒
2. 建议用DATE数据类型来保存日期。MySQL中默认的日期格式是yyyy-mm-dd
3. 用MySQL的内建类型DATE、TIME、DATETIME来存储时间，而不是使用字符串
4. 当数据格式为TIMESTAMP和DATETIME时，可以用CURRENT_TIMESTAMP作为默认（MySQL5.6以后），MySQL会自动返回记录插入的确切时间
5. TIMESTAMP是UTC时间戳，与时区相关
6. DATETIME的存储格式是一个YYYYMMDD HH:MM:SS的整数，与时区无关，你存了什么，读出来就是什么
7. 除非有特殊需求，一般的公司建议使用TIMESTAMP，它比DATETIME更节约空间，但是像阿里这样的公司一般会用DATETIME，因为不用考虑TIMESTAMP将来的时间上限问题
8. 有时人们把Unix的时间戳保存为整数值，但是这通常没有任何好处，这种格式处理起来不太方便，我们并不推荐它

## 字符串

| 类型     | 大小         | 用途                                                         |
| -------- | ------------ | ------------------------------------------------------------ |
| CHAR     | 0-255字节    | 定长字符串，char(n)当插入的字符串实际长度不足n时， 插入空格进行补充保存。在进行检索时，尾部的空格会被去掉 |
| VARCHAR  | 0-65535 字节 | 变长字符串，varchar(n)中的n代表最大列长度，插入的变长字符串，varchar(n)中的n代表最大列长度，插入的 |
| TINYBLOB | 0-255字节    | 不超过 255 个字符的二进制字符串                              |
| TINYTEXT | 0-255字节    | 短文本字符串                                                 |

**优化建议**

1. 字符串的长度相差较大用VARCHAR；字符串短，且所有值都接近一个长度用CHAR
2. CHAR和VARCHAR适用于包括人名、邮政编码、电话号码和不超过255个字符长度的任意字母数字组合。那些要用来计算的数字不要用VARCHAR类型保存，因为可能会导致一些与计算相关的问题。换句话说，可能影响到计
3. 尽量少用BLOB和TEXT，如果实在要用可以考虑将BLOB和TEXT字段单独存一张表，用id关联
4. BLOB系列存储二进制字符串，与字符集无关。TEXT系列存储非二进制字符串，与字符集相关
5. BLOB和TEXT都不能有默认值



