# 资源管理

#### 资源管理介绍



#### 资源管理方式

- 命令式对象管理

  - ```sh
    kubectl run [pod控制器名称]/[pod名称] [args]
    ```

- 命令式对象配置

  - ```sh
    kubectl create/patch -f nginx-pod.yaml
    ```

- 声明式对象配置（用于创建和更新资源的结合体）

  - ```sh
    kubectl apply -f nginx-pod.yaml
    ```

![image-20210901171055998](资源管理.assets/image-20210901171055998.png)

##### 命令式对象管理

```sh
# kubectl command type [name] [flags]
#   command: create, get, delete
#	type: nodes, pod[po], service[svc]...

# 查看所有可用type，包含type的简写
$ kubectl api-resources

# 查看	pod
$ kubectl get po nginx-6799fc88d8-z49rp -o wide

NAME                     READY   STATUS    RESTARTS   AGE   IP           NODE    NOMINATED NODE 
nginx-6799fc88d8-z49rp   1/1     Running   0          42m   10.244.2.6   node2   <none>           

```



##### 命令式对象配置

```sh
# 创建一个nginxpod.yaml
$ vi nginxpod.yaml

-----------------------------
# 创建命名空间
apiVersion: v1
kind: Namespace
metadata:
  name: dev
---
# 创建pod
apiVersion: v1
kind: Pod
metadata:
  name: nginxpod
  namespace: dev
spec:
  # 创建容器
  containers:
  - name: nginx-containers
    image: nginx
-----------------------------

# 创建
$ kubectl create -f nginxpod.yaml 

namespace/dev created
pod/nginxpod created

# 删除
$ kubectl delete -f nginxpod.yaml 

namespace "dev" deleted
pod "nginxpod" deleted

```



##### 声明式对象配置

```sh
# 使用上面创建好的nginxpod.yaml

# 创建
$ kubectl apply -f nginxpod.yaml 

namespace/dev created
pod/nginxpod created

# 再次运行
$ kubectl apply -f nginxpod.yaml 

namespace/dev unchanged
pod/nginxpod unchanged

# 如果yaml文件修改过，如镜像的版本修改了，那么再次运行就会修改pod
```

##### 扩展：kubectl

> kubectl默认不支持在node节点上运行

kubectl的运行需要配置的，它的配置文件是$HOME/.kube，如果想要在node节点上运行命令，需要将master的.kube文件复制到node节点上

```sh
scp -r ~/.kube node1:~/
```

