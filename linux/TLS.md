# TLS / SSL / HTTPS



## HTTPS（HTTP Security）

发展快20年了，是20世纪互联网行业里最伟大的发明，没有之一



基于 SSL / TLS 协议



非对称加密算法 加密 密码

* 一个key 对称加密
* 两个key 加密key（私钥，相对较长） 解密key（公钥，相对较短） 非对称加密



Https中

对称加密算法用于加密数据

非对称加密算法用于加密对称加密算法中的key



## TLS





## SSL



## TCP 协议

网络层协议，负责传输数据（HTTP协议包）



有状态



## HTTP

实现了HTTP协议的主流服务器

Nginx，tomcat，iis



无状态



### TLS/SSL 证书的作用

身份认证、数据加密

* 证书可以帮助验证主机地址或网站的身份，证书包含关于主机地址或网站身份真实的详细信息，所以当点击浏览器地址栏的锁标志，可以看到该证书是在哪生成的，还有详细信息
* 它能加密通过网站交换的信息。当对传输中的数据进行加密时，通过web站点交换的敏感信息不能被目标接收方意外的任何人截获和读取

### TLS/SSL 证书的由来

由受信任证书颁发机构(CA)颁发的SSL/TLS证书是最可靠的。CA必须遵循非常严格的规则和策略，以确定谁可以或不可以接收SSL证书。因此，当您拥有来自受信任CA的有效SSL证书时，信任程度就会更高。当证书颁发机构(CA)对它们进行签名或另一个实体对它们进行验证时，该证书的所有者可以利用公钥与另一方建立安全连接，或验证某人使用私钥进行数字签名的文档。

一些X.509 SSL/TLS证书是自签名的。而且这些证书对于面向公众的应用程序是不可信的。因此，它们主要用于对组织网络中的数据进行加密和身份验证。

## X.509 Cretificate

**X.509**是密码学里[公钥证书](https://zh.wikipedia.org/wiki/公钥证书)的格式标准。X.509证书已应用在包括[TLS/SSL](https://zh.wikipedia.org/wiki/TLS/SSL)在内的众多[网络协议](https://zh.wikipedia.org/wiki/网络协议)里，同时它也用在很多非在线应用场景里，比如电子签名服务。X.509证书里含有公钥、身份信息（比如网络主机名，组织的名称或个体名称等）和签名信息（可以是证书签发机构CA的签名，也可以是自签名）。对于一份经由可信的证书签发机构签名或者可以通过其它方式验证的证书，证书的拥有者就可以用证书及相应的私钥来创建安全的通信，对文档进行[数字签名](https://zh.wikipedia.org/wiki/数字签名)。

TLS/SSL 协议中最流行的数据加密证书之一：X.509证书，或者是使用了X.509标准的公钥证书。

### 一些证书相关的文件

* .pem，采用PEM编码的X.509证书
* .der，采用DER编码的X.509证书
* .crt，X.509证书，用于unix系统，通常是PEM编码
* .cer，X.509证书，用于window系统，通常是DER编码
* .p12，全称PKCS#12，.p12文件 = X.509证书 + 私钥，可以称为秘钥存储库（keystore）
* .csr，证书签名请求，用于向权威证书颁发机构获得签名证书，起核心内容包含一个 RSA 公钥和其他的机构或者域名信息，在生成证书的同时还会配对生成一个 RSA 私钥，存放于服务器不能外泄
* .key，通常用来存放一个 RSA 公钥或者私钥，编码可能是PEM或者是DER





## linux 环境下生成并使用 TLS/SSL 证书

### 一、生成服务器的私钥和公钥（CSR）





## window 环境下生成并使用 TLS/SSL 证书